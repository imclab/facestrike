var loop;var mainCanvas;var renderer;var gameinput;var level;var loader;var megaman;function onFrame(){level.Process();renderer.Render()}function main(){loader=new Pipes.Loader();loader.PushAssets(MegamanParams);loader.PushAssets(QuickmanParams);loader._assets.push("sprites/maps/elecman_tiles.gif");loader.onload=function(){MainGame()};loader.StartLoading()}function MainGame(){GameInput.Initialize();mainCanvas=document.getElementById("maincanvas");renderer=new Renderer(mainCanvas);level=Pipes.CreateLevel(ElecmanMapParams,renderer);level.SetCamera(new Camera(0,mainCanvas.width));var a=Pipes.CreateAnimationState(MegamanParams,renderer);megaman=new MegamanCharacter(a,40,40,level.GetCurrentMap());level.SetMainCharacter(megaman);gameinput=new GameInput();gameinput.SetListener(megaman.GetController());loop=new GameLoop(60,onFrame);loop.Start()}function cheat(){var b=Pipes.CreateAnimationState(MegamanParams,renderer);var a=new MegamanCharacter(b,megaman.x-60,70,level.GetCurrentMap());level.GetCurrentMap().AddGameElement(a);new GameInput().SetListener(a.GetController())};